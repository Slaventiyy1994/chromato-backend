describe('Методика визначення домішок у іпідакрина гідрохлориду моногідраті', () => {

  // 1. Перевірка кількості розчинів (з урахуванням 2 паралелей іспитового)
  it('має коректну кількість розчинів для приготування', () => {
    // Перелік (6 штук):
    //   1) Іспитовий розчин #1
    //   2) Іспитовий розчин #2
    //   3) Розчин порівняння A1
    //   4) Розчин порівняння A2 (5 мл A1 у колбу 100 мл => +95 мл MeOH)
    //   5) Розчин порівняння A3 (фінальна розводка)
    //   6) Контрольний розчин
    const expectedNumberOfSolutions = 6;
    expect(expectedNumberOfSolutions).toBe(6);
  });

  // 2. Перевірка розчинників
  it('використовує потрібні розчинники', () => {
    // - Метанол R (для приготування всіх розчинів)
    // - Вода з амонієм дигідрофосфатом (pH ~4.0) як складова рухомої фази
    const solventsUsed = ['Метанол R', 'Вода (pH 4.0)', 'Ам. дигідрофосфат'];
    expect(solventsUsed).toContain('Метанол R');
    expect(solventsUsed).toContain('Вода (pH 4.0)');
    expect(solventsUsed).toContain('Ам. дигідрофосфат');
  });

  // 3. Параметри хроматографування
  it('містить правильні умови хроматографування', () => {
    // - Об’єм інжекції: 5 мкл
    // - Швидкість потоку: 1.0 мл/хв
    // - Тривалість (градієнт): 45 хв
    const injectionVolume = 5;  // мкл
    const flowRate = 1.0;      // мл/хв
    const totalRunTime = 45;   // хв

    expect(injectionVolume).toBe(5);
    expect(flowRate).toBeCloseTo(1.0, 1);
    expect(totalRunTime).toBeLessThanOrEqual(60);
  });

  // 4. Перевірка загального об’єму рухомої фази (з урахуванням резерву)
  it('має коректний загальний обсяг рухомої фази, враховуючи резерв', () => {
    // Основний градієнт: ~45 мл (45 хв * 1 мл/хв)
    // Резерв: ~10 мл (на промивання/рееквілібрацію)
    // Разом: 55 мл
    const mainUsage = 45;
    const reserve = 10;
    const totalMobilePhase = mainUsage + reserve; // 55 мл
    expect(totalMobilePhase).toBe(55);
  });

  // 5. Перевірка співвідношення фази A і фази B (спрощений підхід: А=55%, B=45%)
  it('розподіляє загальний обсяг рф (55 мл) у співвідношенні 55% (фаза A) і 45% (фаза B)', () => {
    const totalMobilePhase = 55;
    const fractionA = 0.55; // 55%
    const fractionB = 0.45; // 45%

    const usageA = totalMobilePhase * fractionA; // має вийти 30.25 мл
    const usageB = totalMobilePhase * fractionB; // має вийти 24.75 мл

    // Перевіряємо коректність сумування
    expect(usageA + usageB).toBeCloseTo(totalMobilePhase, 2);
  });

  // 6. Перевірка витрат метанолу на приготування розчинів
  it('правильно враховує обсяг метанолу R для кожного розчину (з 2 паралелями)', () => {
    // Умовний приклад (цифри можуть відрізнятись від фактичних!):
    //   Іспитовий #1: 50 мл
    //   Іспитовий #2: 50 мл
    //   A1:           50 мл
    //   A2:           5 мл A1 + 95 мл MeOH => 100 мл total
    //   A3:           10 мл A2 + 40 мл MeOH => 50 мл total
    //   Контроль:     10 мл
    //
    // Підраховуємо тільки "чистий" метанол:
    //   - Іспитовий #1: 50
    //   - Іспитовий #2: 50
    //   - A1:           50
    //   - A2:           95
    //   - A3:           40
    //   - Контроль:     10
    // Підсумок: 295 мл
    const totalMethanol = 50 + 50 + 50 + 95 + 40 + 10; // 295
    expect(totalMethanol).toBeGreaterThan(0);
  });

  // 7. Перевірка використання референсних стандартів
  it('використовує референсні стандарти для розчинів порівняння', () => {
    const usesReferenceStandard = true;
    expect(usesReferenceStandard).toBe(true);
  });

  // 8. Перевірка кількості інжекцій
  it('має правильну кількість інжекцій (фінальна розводка порівняння, 2 паралелі, контроль)', () => {
    // - A3 заколюється 3 рази
    // - 2 паралелі іспитового: по 2 інжекції => 4 разом
    // - Контрольний: 1
    // Підсумок: 3 + 4 + 1 = 8
    const comparisonInjections = 3; 
    const testInjections = 2 * 2; 
    const controlInjections = 1; 
    const totalInjections = comparisonInjections + testInjections + controlInjections; 
    expect(totalInjections).toBe(8);
  });

});
